/**
 * FancyTabs - tabbed navigation
 * @version		1.0.0
 * @MooTools version 1.2
 * @author Constantin Boiangiu <constantin.b [at] gmail.com>
 * @copyright Constantin Boiangiu
 */
var FancyTabs=new Class({Implements:[Options],options:{tabs:null,contentContainer:null,contentElement:null,tabFx:{classSelected:null,classDefault:null},fxStyle:1,slideEnter:"left",auto:null,stopOnClick:true},initialize:function(A){this.setOptions(A);this.currentTab=0;this.tabs=$(document.body).getElements(this.options.tabs);this.contents=$(this.options.contentContainer).getElements(this.options.contentElement);this.hide={opacity:0,display:"none"};this.show={display:"block"};this.content=$(this.options.contentContainer);this.content.set("morph",{duration:500,transition:"back:out",wait:false});this.tabs.each(function(D,C){D.set("morph",{duration:400,transition:"sine:out",wait:false});if(D.hasClass("selected")){this.currentTab=C;D.morph(this.options.tabFx.classSelected)}D.addEvents({click:function(E){new Event(E).stop();if($defined(this.rotate)&&this.options.auto){$clear(this.rotate)}this.changeTab(C)}.bind(this)})}.bind(this));this.setPeriodical();this.contents.each(function(E,D){E.set("morph",{duration:1200,transition:"sine:out",wait:false});var C=E.getSize();E.store("size",C).setStyles({width:C.x-(2*E.getStyle("padding").toInt()),height:C.y});if(D!==this.currentTab){E.setStyles({opacity:0,display:"none"})}else{if(this.tabs[D].get("rel")=="ajax"){this.changeTab(D,true)}this.content.morph({height:[0,C.y]})}if($defined(this.rotate)&&this.options.auto){E.addEvents({mouseenter:function(){$clear(this.rotate)}.bind(this),mouseleave:function(){this.setPeriodical()}.bind(this)})}}.bind(this));switch(this.options.fxStyle){case 1:this.showFx={opacity:[0.3,1]};break;case 2:var B=this.contents[0].retrieve("size");switch(this.options.slideEnter){case"left":this.showFx={"margin-left":[-B.x/2,0],opacity:[0.3,1]};break;case"right":this.showFx={"margin-left":[B.x/2,0],opacity:[0.3,1]};break}break;default:this.showFx={opacity:1};break}},setPeriodical:function(){if(!this.options.auto){return}this.rotate=this.autoSlide.periodical(this.options.auto,this)},autoSlide:function(){var A=this.currentTab+1;if(A>=this.tabs.length){A=0}this.changeTab(A)},changeTab:function(B,F){if(!F&&B==this.currentTab){return}if(this.tabs[B].get("rel")=="ajax"&&!this.contents[B].retrieve("completeLoad")&&this.tabs[B].retrieve("loaded")){this.contents[B].setStyles(this.show);var A=this.contents[B].getScrollSize();this.contents[B].store("size",A)}var E=this.contents[this.currentTab].retrieve("size");var D=this.contents[B].retrieve("size");this.contents[this.currentTab].morph(this.hide);this.contents[B].setStyles(this.show).morph(this.showFx);this.content.morph({height:[E.y,D.y]});this.tabs[this.currentTab].morph(this.options.tabFx.classDefault);this.tabs[B].morph(this.options.tabFx.classSelected);if(this.tabs[B].get("rel")=="ajax"&&!this.tabs[B].retrieve("loaded")&&!this.tabs[B].retrieve("loading")){this.tabs[B].store("loading",true);this.contents[B].addClass("loadingAjax");var C=new Request.HTML({url:this.tabs[B].get("href"),onSuccess:function(H,J,K){this.tabs[B].store("loaded",true);this.tabs[B].set("loading",false);var L=this.contents[B];var I=L.retrieve("size");L.set({html:K}).setStyles({width:"auto",height:"auto"}).removeClass("loadingAjax");if(this.currentTab==B){var G=L.getSize();L.store("size",G).setStyles({width:G.x-(2*L.getStyle("padding").toInt()),height:G.y});this.content.morph({height:[I.y,G.y]});L.store("completeLoad",true)}if(!this.options.stopOnClick&&!$defined(this.rotate)&&this.options.auto){this.setPeriodical()}}.bind(this),onFailure:function(){var J="Sorry, could not load content. Please contact the website administrator regarding this error.";var I=this.contents[B];var H=I.retrieve("size");I.set({html:J}).setStyles({width:"auto",height:"auto"}).removeClass("loadingAjax");if(this.currentTab==B){var G=I.getSize();I.store("size",G).setStyles({width:G.x-(2*I.getStyle("padding").toInt()),height:G.y});this.content.morph({height:[H.y,G.y]});I.store("completeLoad",true)}}.bind(this)}).get()}else{if(!this.options.stopOnClick&&!$defined(this.rotate)&&this.options.auto){this.setPeriodical()}}this.currentTab=B}});window.addEvent("domready",function(){var C=new FancyTabs({tabs:"#FC_tabs .tab",contentContainer:"FC_content",contentElement:".content",tabFx:{classSelected:".FC_selected",classDefault:".FC_default"},fxStyle:2,slideEnter:"left"});var B=new FancyTabs({tabs:"#FT_tabs .tab",contentContainer:"FT_content",contentElement:".content",tabFx:{classSelected:".FT_selected",classDefault:".FT_default"},fxStyle:1,slideEnter:"left",auto:7000,stopOnClick:true});new Tips("#FT_tabs .tab",{className:"FT_tip",offset:{x:-115,y:-80},fixed:true});var A=new FancyTabs({tabs:"#FA_tabs .tab",contentContainer:"FA_content",contentElement:".content",tabFx:{classSelected:".FA_selected",classDefault:".FA_default"},fxStyle:1,slideEnter:"left"})});